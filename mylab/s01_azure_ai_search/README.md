# Azure AI Search èˆ‡ AI Foundry Agent æ•´åˆç¯„ä¾‹

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æ­¤å°ˆæ¡ˆå±•ç¤ºå¦‚ä½•å°‡ Azure AI Search èˆ‡ Azure AI Foundry Agent é€²è¡Œæ•´åˆï¼Œæä¾›å®Œæ•´çš„å‘é‡æœç´¢å’Œæ™ºèƒ½å°è©±åŠŸèƒ½ã€‚å°ˆæ¡ˆåˆ†ç‚ºä¸‰å€‹ä¸»è¦æ­¥é©Ÿï¼Œæ¯å€‹æ­¥é©Ÿéƒ½æœ‰å°æ‡‰çš„ Python è…³æœ¬ã€‚

## ğŸ¯ å­¸ç¿’ç›®æ¨™

- å­¸ç¿’å¦‚ä½•å»ºç«‹å’Œé…ç½® Azure AI Search å‘é‡ç´¢å¼•
- äº†è§£å¦‚ä½•å‰µå»ºå’Œéƒ¨ç½² AI Foundry Agent
- æŒæ¡ AI Agent èˆ‡æœç´¢æœå‹™çš„æ•´åˆæ–¹æ³•
- å­¸ç¿’å¦‚ä½•æ­£ç¢ºæ¸…ç†å’Œç®¡ç†é›²ç«¯è³‡æº

## ğŸ“ æª”æ¡ˆçµæ§‹

```
mylab/s01_azure_ai_search/
â”œâ”€â”€ step1_create_search_index.py    # æ­¥é©Ÿ 1: å»ºç«‹æœç´¢ç´¢å¼•
â”œâ”€â”€ step2_create_ai_agent.py        # æ­¥é©Ÿ 2: å»ºç«‹ AI Agent
â”œâ”€â”€ step3_cleanup_resources.py      # æ­¥é©Ÿ 3: æ¸…ç†è³‡æº
â”œâ”€â”€ requirements.txt                # Python ä¾è³´å¥—ä»¶æ¸…å–®
â”œâ”€â”€ .env.example                    # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬æª”æ¡ˆ
â”œâ”€â”€ README.md                       # æœ¬èªªæ˜æ–‡ä»¶
â””â”€â”€ vector-search-quickstart.ipynb  # åŸå§‹ Jupyter Notebook
```

## ğŸ”§ ç’°å¢ƒæº–å‚™

### ç³»çµ±éœ€æ±‚

- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Azure è¨‚é–±å¸³æˆ¶
- Azure AI Studio å°ˆæ¡ˆ
- Azure AI Search æœå‹™

### å®‰è£ä¾è³´å¥—ä»¶

```bash
# ä½¿ç”¨ requirements.txtï¼ˆæ¨è–¦ï¼‰
pip install -r requirements.txt

# æˆ–æ‰‹å‹•å®‰è£å€‹åˆ¥å¥—ä»¶
pip install azure-search-documents
pip install azure-ai-projects
pip install azure-identity
pip install python-dotenv
```

### ç’°å¢ƒè®Šæ•¸è¨­å®š

1. è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„æœ¬ï¼š
```bash
cp .env.example .env
```

2. ç·¨è¼¯ `.env` æª”æ¡ˆä¸¦å¡«å…¥æ‚¨çš„è¨­å®šï¼š
```bash
# Azure AI Search è¨­å®š
AZURE_SEARCH_ENDPOINT=https://your-search-service.search.windows.net
AZURE_SEARCH_API_KEY=your-search-api-key
AZURE_SEARCH_INDEX=vector-search-quickstart

# Azure AI Project è¨­å®š
PROJECT_ENDPOINT=https://your-ai-project.cognitiveservices.azure.com
MODEL_DEPLOYMENT_NAME=gpt-4o
```

## ğŸ“‹ è©³ç´°æ­¥é©Ÿèªªæ˜

### æ­¥é©Ÿ 1: å»ºç«‹ AI Search ç´¢å¼•å’Œç›¸é—œåŠŸèƒ½

**æª”æ¡ˆ**: `step1_create_search_index.py`

**åŠŸèƒ½èªªæ˜**:
- åˆå§‹åŒ– Azure Search å®¢æˆ¶ç«¯å’Œèªè­‰
- å»ºç«‹å…·æœ‰å‘é‡æœç´¢åŠŸèƒ½çš„ç´¢å¼•
- æº–å‚™é…’åº—æ–‡æª”æ•¸æ“šï¼ˆåŒ…å«é å…ˆè¨ˆç®—çš„åµŒå…¥å‘é‡ï¼‰
- ä¸Šå‚³æ–‡æª”åˆ°ç´¢å¼•
- æ¸¬è©¦åŸºæœ¬æœç´¢åŠŸèƒ½ï¼ˆæ–‡å­—æœç´¢ã€å‘é‡æœç´¢ã€ç¯©é¸æœç´¢ï¼‰

**åŸ·è¡Œæ–¹å¼**:
```bash
python step1_create_search_index.py
```

**é æœŸè¼¸å‡º**:
- âœ… ç´¢å¼•å»ºç«‹æˆåŠŸ
- âœ… æ–‡æª”ä¸Šå‚³å®Œæˆ
- âœ… æœç´¢åŠŸèƒ½æ¸¬è©¦é€šé

### æ­¥é©Ÿ 2: å»ºç«‹ AI Foundry Agent å’Œç›¸é—œåŠŸèƒ½

**æª”æ¡ˆ**: `step2_create_ai_agent.py`

**åŠŸèƒ½èªªæ˜**:
- åˆå§‹åŒ– Azure AI Project å®¢æˆ¶ç«¯
- é©—è­‰æœç´¢ç´¢å¼•å¯ç”¨æ€§
- å»ºç«‹å…·æœ‰æœç´¢æ•´åˆåŠŸèƒ½çš„ AI Agent
- å»ºç«‹å°è©±ç·šç¨‹
- æ¸¬è©¦ Agent å°è©±èƒ½åŠ›
- æ¯”è¼ƒæœ‰/ç„¡æœç´¢å·¥å…·çš„å›è¦†å·®ç•°
- é©—è­‰ Agent æœç´¢æ•´åˆæ½›åŠ›

**åŸ·è¡Œæ–¹å¼**:
```bash
python step2_create_ai_agent.py
```

**é æœŸè¼¸å‡º**:
- âœ… AI Agent å»ºç«‹æˆåŠŸ
- âœ… å°è©±åŠŸèƒ½æ¸¬è©¦é€šé
- âœ… æœç´¢æ•´åˆé©—è­‰å®Œæˆ

### æ­¥é©Ÿ 3: æ¸…ç† AI Search ç´¢å¼•å’Œ AI Foundry Agent

**æª”æ¡ˆ**: `step3_cleanup_resources.py`

**åŠŸèƒ½èªªæ˜**:
- åˆ—å‡ºå’Œè­˜åˆ¥éœ€è¦æ¸…ç†çš„è³‡æº
- å®‰å…¨åˆªé™¤ AI Agent å’Œç›¸é—œè³‡æº
- æ¸…ç†æœç´¢ç´¢å¼•å’Œæ–‡æª”
- é©—è­‰æ¸…ç†å®Œæˆç‹€æ…‹
- æä¾›æ¸…ç†æ‘˜è¦å ±å‘Š

**åŸ·è¡Œæ–¹å¼**:

åŸºæœ¬æ¨¡å¼ï¼š
```bash
python step3_cleanup_resources.py
```

äº’å‹•æ¨¡å¼ï¼š
```bash
python step3_cleanup_resources.py --interactive
```

æŒ‡å®š Agent IDï¼š
```bash
python step3_cleanup_resources.py --agent-id "your-agent-id"
```

å¼·åˆ¶æ¸…ç†ï¼š
```bash
python step3_cleanup_resources.py --force
```

**é æœŸè¼¸å‡º**:
- âœ… Agent æ¸…ç†å®Œæˆ
- âœ… ç´¢å¼•æ¸…ç†å®Œæˆ
- ğŸ“Š æ¸…ç†æ‘˜è¦å ±å‘Š

## ğŸ® ä½¿ç”¨æŒ‡å—

### å®Œæ•´æµç¨‹åŸ·è¡Œ

1. **æº–å‚™ç’°å¢ƒ**:
   ```bash
   # å®‰è£å¥—ä»¶
   pip install -r requirements.txt
   
   # è¨­å®šç’°å¢ƒè®Šæ•¸
   cp .env.example .env
   # ç·¨è¼¯ .env æª”æ¡ˆå¡«å…¥æ‚¨çš„è¨­å®š
   ```

2. **åŸ·è¡Œæ­¥é©Ÿ 1**:
   ```bash
   python step1_create_search_index.py
   ```
   ç­‰å¾…ç´¢å¼•å»ºç«‹å®Œæˆ

3. **åŸ·è¡Œæ­¥é©Ÿ 2**:
   ```bash
   python step2_create_ai_agent.py
   ```
   æ¸¬è©¦ Agent åŠŸèƒ½

4. **åŸ·è¡Œæ­¥é©Ÿ 3**:
   ```bash
   python step3_cleanup_resources.py --interactive
   ```
   æ ¹æ“šæç¤ºæ¸…ç†è³‡æº

### é€²éšä½¿ç”¨

#### åƒ…æ¸…ç†ç‰¹å®šè³‡æº
```bash
# åƒ…æ¸…ç† Agent
python step3_cleanup_resources.py --agents-only

# åƒ…æ¸…ç†ç´¢å¼•
python step3_cleanup_resources.py --index-only
```

## ğŸ” åŠŸèƒ½ç‰¹è‰²

### Azure AI Search åŠŸèƒ½
- **å‘é‡æœç´¢**: æ”¯æ´é«˜ç¶­å‘é‡ç›¸ä¼¼åº¦æœç´¢
- **æ··åˆæœç´¢**: çµåˆå…¨æ–‡æœç´¢å’Œå‘é‡æœç´¢
- **èªæ„æœç´¢**: æä¾›æ™ºèƒ½æœç´¢æ’åº
- **ç¯©é¸åŠŸèƒ½**: æ”¯æ´è¤‡é›œçš„æŸ¥è©¢ç¯©é¸æ¢ä»¶
- **åœ°ç†æœç´¢**: æ”¯æ´åœ°ç†ä½ç½®æŸ¥è©¢

### AI Foundry Agent åŠŸèƒ½
- **æ™ºèƒ½å°è©±**: è‡ªç„¶èªè¨€å°è©±ä»‹é¢
- **æœç´¢æ•´åˆ**: èˆ‡ Azure AI Search ç„¡ç¸«æ•´åˆ
- **ä¸Šä¸‹æ–‡è¨˜æ†¶**: ç¶­æŒå°è©±ä¸Šä¸‹æ–‡
- **å·¥å…·ä½¿ç”¨**: æ”¯æ´å¤–éƒ¨å·¥å…·èª¿ç”¨
- **å¤šè¼ªå°è©±**: æ”¯æ´è¤‡é›œçš„å¤šè¼ªå°è©±

### æ•´åˆå„ªå‹¢
- **æº–ç¢ºæ€§æå‡**: é€éæœç´¢ç²å¾—æœ€æ–°å’Œæº–ç¢ºçš„è³‡è¨Š
- **ç›¸é—œæ€§å¢å¼·**: å‘é‡æœç´¢æä¾›èªæ„ç›¸é—œçš„çµæœ
- **å¯æ“´å±•æ€§**: æ”¯æ´å¤§è¦æ¨¡æ–‡æª”å’Œç”¨æˆ¶æŸ¥è©¢
- **å¯æ§æ€§**: æä¾›æ¸…æ™°çš„è³‡æ–™ä¾†æºå’Œå¼•ç”¨

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. èªè­‰éŒ¯èª¤
**å•é¡Œ**: ç„¡æ³•é€£æ¥åˆ° Azure æœå‹™
**è§£æ±ºæ–¹æ¡ˆ**:
- æª¢æŸ¥ `.env` æª”æ¡ˆä¸­çš„ç«¯é»å’Œ API é‡‘é‘°
- ç¢ºèª Azure è¨‚é–±ç‹€æ…‹
- é©—è­‰æœå‹™å€åŸŸè¨­å®š

#### 2. ç´¢å¼•å»ºç«‹å¤±æ•—
**å•é¡Œ**: æœç´¢ç´¢å¼•å»ºç«‹ä¸æˆåŠŸ
**è§£æ±ºæ–¹æ¡ˆ**:
- æª¢æŸ¥ Azure Search æœå‹™å±¤ç´šå’Œé…é¡
- ç¢ºèªç´¢å¼•åç¨±ç¬¦åˆå‘½åè¦å‰‡
- é©—è­‰å‘é‡ç¶­åº¦è¨­å®šæ­£ç¢º

#### 3. Agent å»ºç«‹å¤±æ•—
**å•é¡Œ**: AI Agent ç„¡æ³•å»ºç«‹
**è§£æ±ºæ–¹æ¡ˆ**:
- ç¢ºèª AI Studio å°ˆæ¡ˆå·²æ­£ç¢ºè¨­å®š
- æª¢æŸ¥æ¨¡å‹éƒ¨ç½²ç‹€æ…‹
- é©—è­‰å°ˆæ¡ˆç«¯é» URL

#### 4. æœç´¢æ•´åˆå•é¡Œ
**å•é¡Œ**: Agent ç„¡æ³•ä½¿ç”¨æœç´¢åŠŸèƒ½
**è§£æ±ºæ–¹æ¡ˆ**:
- ç¢ºèªç´¢å¼•å·²å»ºç«‹ä¸¦åŒ…å«æ–‡æª”
- æª¢æŸ¥æœç´¢æœå‹™æ¬Šé™è¨­å®š
- é©—è­‰å‘é‡ç¶­åº¦åŒ¹é…

### é™¤éŒ¯æŠ€å·§

#### å•Ÿç”¨è©³ç´°æ—¥èªŒ
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```
